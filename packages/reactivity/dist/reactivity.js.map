{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/reactiveEffect.ts", "../src/baseHandlers.ts", "../src/reactive.ts"],
  "sourcesContent": ["export let activeEffect;\nexport function effect(fn) {\n    const _effect = new ReactiveEffect(fn, () => {\n        _effect.run();\n    });\n\n    _effect.run();\n}\n\n\nclass ReactiveEffect {\n    active = true;\n    constructor(public fn, public scheduler) {\n    }\n\n    run() {\n        if (!this.active) {\n            return this.fn();\n        }\n\n        let lastEffect = activeEffect;\n\n        try {\n            activeEffect = this;\n            return this.fn();\n        }\n        finally {\n            activeEffect = lastEffect; \n        }\n        \n    }\n}", "export function isObject (value) {\n    return typeof value === 'object' && value !== null;\n}", "import { activeEffect } from \"./effect\";\n\nexport function track(target, key) {\n    console.log(target, key, activeEffect)\n}", "import { track } from \"./reactiveEffect\";\n\nexport enum ReactiveFlags {\n    IS_REACTIVE = \"__v_isReactive\",\n}\n\nexport const mutableHandlers: ProxyHandler<any> = {\n    get(target, key, receiver) {\n        if (key === ReactiveFlags.IS_REACTIVE) {\n            return true;\n        }\n        track(target, key);\n        return Reflect.get(target, key, receiver);\n    },\n\n    set(target, key, value, receiver) {\n        return Reflect.set(target, key, value, receiver);\n    },\n}", "import { isObject } from \"@vue/shared\";\nimport { ReactiveFlags, mutableHandlers } from \"./baseHandlers\";\n\nconst reactiveMap = new WeakMap();\n\n\n\nexport function reactive(target) {\n    return createReactiveObject(target);\n}\n\n\n\nfunction createReactiveObject(target) {\n    if (!isObject(target)) {\n        return target;\n    }\n    // \u5224\u65ADtarget\u5DF2\u7ECF\u662F\u4EE3\u7406\u5BF9\u8C61\n    if (target[ReactiveFlags.IS_REACTIVE]) {\n        return target;\n    }\n\n    // \u5224\u65AD\u662F\u5426\u5DF2\u7ECF\u5B58\u5728\u4EE3\u7406\u5BF9\u8C61\n    const existProxy = reactiveMap.get(target);\n    // \u5B58\u5728\u5219\u76F4\u63A5\u8FD4\u56DE\n    if (existProxy) {\n        return existProxy;\n    }\n\n    const proxy = new Proxy(target, mutableHandlers);\n\n    reactiveMap.set(target, proxy);\n\n\n    return proxy;\n}"],
  "mappings": ";AAAO,IAAI;AACJ,SAAS,OAAO,IAAI;AACvB,QAAM,UAAU,IAAI,eAAe,IAAI,MAAM;AACzC,YAAQ,IAAI;AAAA,EAChB,CAAC;AAED,UAAQ,IAAI;AAChB;AAGA,IAAM,iBAAN,MAAqB;AAAA,EAEjB,YAAmB,IAAW,WAAW;AAAtB;AAAW;AAD9B,kBAAS;AAAA,EAET;AAAA,EAEA,MAAM;AACF,QAAI,CAAC,KAAK,QAAQ;AACd,aAAO,KAAK,GAAG;AAAA,IACnB;AAEA,QAAI,aAAa;AAEjB,QAAI;AACA,qBAAe;AACf,aAAO,KAAK,GAAG;AAAA,IACnB,UACA;AACI,qBAAe;AAAA,IACnB;AAAA,EAEJ;AACJ;;;AC/BO,SAAS,SAAU,OAAO;AAC7B,SAAO,OAAO,UAAU,YAAY,UAAU;AAClD;;;ACAO,SAAS,MAAM,QAAQ,KAAK;AAC/B,UAAQ,IAAI,QAAQ,KAAK,YAAY;AACzC;;;ACEO,IAAM,kBAAqC;AAAA,EAC9C,IAAI,QAAQ,KAAK,UAAU;AACvB,QAAI,QAAQ,oCAA2B;AACnC,aAAO;AAAA,IACX;AACA,UAAM,QAAQ,GAAG;AACjB,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC5C;AAAA,EAEA,IAAI,QAAQ,KAAK,OAAO,UAAU;AAC9B,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACnD;AACJ;;;ACfA,IAAM,cAAc,oBAAI,QAAQ;AAIzB,SAAS,SAAS,QAAQ;AAC7B,SAAO,qBAAqB,MAAM;AACtC;AAIA,SAAS,qBAAqB,QAAQ;AAClC,MAAI,CAAC,SAAS,MAAM,GAAG;AACnB,WAAO;AAAA,EACX;AAEA,MAAI,yCAAgC,GAAG;AACnC,WAAO;AAAA,EACX;AAGA,QAAM,aAAa,YAAY,IAAI,MAAM;AAEzC,MAAI,YAAY;AACZ,WAAO;AAAA,EACX;AAEA,QAAM,QAAQ,IAAI,MAAM,QAAQ,eAAe;AAE/C,cAAY,IAAI,QAAQ,KAAK;AAG7B,SAAO;AACX;",
  "names": []
}
